<app-header [titleHeader]="'All Shipments'" [isMenuOrBackButton]="'menu'"></app-header>

<ion-content>

  <ion-card *ngFor="let item of shippingsArray" class="eptCard">
    <ion-card-header class="CardHeader">
      <p text-wrap class="schemeName"> {{item.schemeName}}</p>
    </ion-card-header>
    <ion-card-content class="cardContent">
      <ion-grid class="shipmentGrid">
        <ion-row *ngIf="item.shipmentDate">
          <ion-col size="5">
            <p text-wrap>
              <span class="text-title-color">Shipment Date </span>
            </p>
          </ion-col>
          <ion-col size="1">
            <p text-wrap>
              <span class="text-title-color">:</span>
            </p>
          </ion-col>
          <ion-col>
            <p text-wrap class="shipmentValues">
              <span>{{item.shipmentDate | date :'d MMM y'}}</span>
            </p>
          </ion-col>
        </ion-row>


        <ion-row *ngIf="item.shipmentCode">
          <ion-col size="5">
            <p text-wrap>
              <span class="text-title-color">Shipment Code </span>
            </p>
          </ion-col>
          <ion-col size="1">
            <p text-wrap>
              <span class="text-title-color">:</span>
            </p>
          </ion-col>
          <ion-col>
            <p text-wrap class="shipmentValues">
              <span>{{item.shipmentCode}}</span>
            </p>
          </ion-col>
        </ion-row>


        <ion-row *ngIf="item.participantId">
          <ion-col size="5">
            <p text-wrap>
              <span class="text-title-color">Participant ID </span>
            </p>
          </ion-col>
          <ion-col size="1">
            <p text-wrap>
              <span class="text-title-color">:</span>
            </p>
          </ion-col>
          <ion-col>
            <p text-wrap class="shipmentValues">
              <span>{{item.participantId}}</span>
            </p>
          </ion-col>
        </ion-row>



        <ion-row *ngIf="item.participantName">
          <ion-col size="5">
            <p text-wrap>
              <span class="text-title-color">Participant Name </span>
            </p>
          </ion-col>
          <ion-col size="1">
            <p text-wrap>
              <span class="text-title-color">:</span>
            </p>
          </ion-col>
          <ion-col>
            <p text-wrap class="shipmentValues">
              <span>{{item.participantName}}</span>
            </p>
          </ion-col>
        </ion-row>


        <ion-row *ngIf="item.resultDueDate">
          <ion-col size="5">
            <p text-wrap>
              <span class="text-title-color">Result Due Date </span>
            </p>
          </ion-col>
          <ion-col size="1">
            <p text-wrap>
              <span class="text-title-color">:</span>
            </p>
          </ion-col>
          <ion-col>
            <p text-wrap class="shipmentValues">
              <span>{{item.resultDueDate  | date :'d MMM y'}}</span>
            </p>
          </ion-col>
        </ion-row>

        <ion-row *ngIf="item.responseDate">
          <ion-col size="5">
            <p text-wrap>
              <span class="text-title-color">Response Date </span>
            </p>
          </ion-col>
          <ion-col size="1">
            <p text-wrap>
              <span class="text-title-color">:</span>
            </p>
          </ion-col>
          <ion-col>
            <p text-wrap class="shipmentValues">
              <span>{{item.responseDate  | date :'d MMM y'}}</span>
            </p>
          </ion-col>
        </ion-row>

        <ion-row>
          <ion-col *ngIf="item.isSynced=='false'" size="12">
            <p text-wrap>
              <span class="text-title-color unSynced"> Unsynced shipment </span>
            </p>
          </ion-col>
        </ion-row>

        <ion-row>
          <ion-col size="6">

            <ion-button *ngIf="item.updatedOn=='' && responseSwitch==on" size="small" class="text-center native-btn"
              (click)="goToTestForm(item)">Enter Response
            </ion-button>

            <ion-button *ngIf="item.updatedOn!='' && responseSwitch==on" size="small" class="text-center native-btn"
              (click)="goToTestForm(item)">Edit Response</ion-button>

          </ion-col>

          <ion-col size="6">
            <ion-button *ngIf="item.updatedOn!=''" size="small" class="text-center native-btn viewResponse"
              (click)="goToTestForm(item,'true')">View Response
            </ion-button>
          </ion-col>
        </ion-row>

      </ion-grid>

    </ion-card-content>
  </ion-card>

</ion-content>


<ion-footer class="ion-no-border syncButton" *ngIf="localStorageUnSyncedArray.length!=0&& networkType!='none'">
  <ion-toolbar>
    <ion-button expand="full" class="text-center native-btn syncAll" (click)="syncShipments()">
      <ion-icon ios="ios-sync" md="md-sync"></ion-icon>
      Sync All ({{localStorageUnSyncedArray.length}})
    </ion-button>
  </ion-toolbar>
</ion-footer>