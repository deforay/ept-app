<app-header *ngIf="isShowReviewMsg==false"  [titleHeader]="schemeName" [isMenuOrBackButton]="'back'"></app-header>

<app-header *ngIf="isShowReviewMsg==true" [titleHeader]="viewSchemeName" [isMenuOrBackButton]="'back'"></app-header>

<ion-content>

    <p *ngIf="viewAccessMessage" class="accessMsg">{{viewAccessMessage}}</p>

    <p *ngIf="isViewPage==false"  class="infoMsg">Please review and verify your result submission</p>

  <mat-accordion class="example-headers-align">
    <mat-expansion-panel *ngIf="showParticipantData" [expanded]="step === 0" (opened)="setStep(0)">
      <mat-expansion-panel-header>
        <mat-panel-title>
          <ion-grid class="panelHeading">
             <ion-row>
                <ion-col size="10" class="grid-readonly-col">
                  <span class="text-title-color">Participant Details</span>
                </ion-col>
                <ion-col size="2" class="grid-readonly-col" *ngIf="validParticipantDetails==true">
                  <ion-icon name="checkmark-circle" class="checkMarkIcon"></ion-icon>
                </ion-col>
              </ion-row>
          </ion-grid>
        </mat-panel-title>
      </mat-expansion-panel-header>
<form>
      <ion-grid>
        <ion-row *ngIf="participantData.laboratoryName">
          <ion-col size="5" class="grid-readonly-col">
            <p class="ion-text-wrap">
              <span class="text-title-color">Laboratory Name </span>
            </p>
           </ion-col>
          <ion-col size="1" class="grid-readonly-col">
            <p class="ion-text-wrap">
              <span class="text-title-color">:</span>
            </p>
          </ion-col>
          <ion-col class="grid-readonly-col">
            <p class="ion-text-wrap">
              <span>{{participantData.laboratoryName}}</span>
            </p>
          </ion-col>
        </ion-row>
        <ion-row *ngIf="participantData.laboratoryId">
          <ion-col size="5" class="grid-readonly-col">
            <p class="ion-text-wrap">
              <span class="text-title-color">Laboratory ID  </span>
            </p>
          </ion-col>
          <ion-col size="1" class="grid-readonly-col">
            <p class="ion-text-wrap">
              <span class="text-title-color">:</span>
            </p>
          </ion-col>
          <ion-col class="grid-readonly-col">
            <p class="ion-text-wrap">
              <span>{{participantData.laboratoryId}}</span>
            </p>
          </ion-col>
        </ion-row>
         <ion-row>
            <ion-col size="6" size-xs class="grid-input-col">
              <mat-form-field class="login-full-width grid-col-form" appearance="outline">
                <mat-label>Lab Director Name <span class="danger-text" *ngIf="isView=='true'">*</span></mat-label>
                <input matInput [(ngModel)]="participantData.labDirectorName"
                  placeholder="Enter Lab Director Name." #labDirectorName="ngModel" name="labDirectorName" required
                  [disabled]="isView=='true'" data-alert="Please enter Lab Director Name." id="labDirectorName">
                <mat-error *ngIf="!participantData.labDirectorName">
                  Lab Director Name is required
                </mat-error>
              </mat-form-field>
            </ion-col>
          </ion-row>
           <ion-row>
            <ion-col size="6" size-xs class="grid-input-col">
              <mat-form-field class="login-full-width grid-col-form" appearance="outline">
                <mat-label>Lab Director Email <span class="danger-text" *ngIf="isView=='true'">*</span></mat-label>
                <input matInput [(ngModel)]="labDirectorEmail" (change)="changeDirectorMail()"
                  placeholder="Enter Lab Director Email." name="eidLabDirectorEmail" type="email"
                  pattern="[a-z0-9._%+-]+@[a-z0-9.-]+\.[a-z]{2,3}$" required #eidLabDirectorEmail="ngModel"
                  [disabled]="isView=='true'" data-alert="Please enter Lab Director Email." id="eidLabDirectorEmail">
                <mat-error *ngIf="!labDirectorEmail">
                  Lab Director Email is required
                </mat-error>
                 <mat-error *ngIf="labDirectorEmail && eidLabDirectorEmail.errors?.pattern">
                Please enter a valid email address
              </mat-error>
            </mat-form-field> 
            </ion-col>
            <!--  -->
          <ion-col size="6" size-xs class="grid-input-col" *ngIf="changeDirectorEmail">
            <mat-form-field class="login-full-width grid-col-form" appearance="outline">
              <mat-label class="matLabel">Confirm Lab Director Email<span class="danger-text" *ngIf="isView=='true'">*</span> </mat-label>
              <input matInput [(ngModel)]="changeLabDirectorEmail" placeholder="enter Confirm Lab Director Email" name="changeLabDirectorEmail"
                 pattern="[a-z0-9._%+-]+@[a-z0-9.-]+\.[a-z]{2,3}$" required type="email"
                 [disabled]="isView=='true'" data-alert="Please enter Confirm Lab Director Email." id="changeLabDirectorEmail">
              <!-- <mat-error *ngIf="changeLabDirectorEmail && changeLabDirectorEmail.errors?.pattern">
                Please enter a valid email address
              </mat-error> -->
              <mat-error *ngIf="!changeLabDirectorEmail">
                Confirm Lab Director Email is required</mat-error>
              <mat-error *ngIf="(changeLabDirectorEmail && (changeLabDirectorEmail != labDirectorEmail))">
                Email doesn't match</mat-error>
            </mat-form-field>
          </ion-col>
          </ion-row>
           <ion-row>
            <ion-col size="6" size-xs class="grid-input-col">
              <mat-form-field class="login-full-width grid-col-form" appearance="outline">
                <mat-label>Contact Person Name <span class="danger-text" *ngIf="isView=='true'">*</span></mat-label>
                <input matInput [(ngModel)]="participantData.contactPersonName"
                  placeholder="Enter Contact Person Name." #contactPersonName="ngModel" name="contactPersonName" required
                  [disabled]="isView=='true'" data-alert="Please enter Contact Person Name." id="contactPersonName">
                <mat-error *ngIf="!participantData.contactPersonName">
                  Contact Person Name is required
                </mat-error>
              </mat-form-field>
            </ion-col>
          </ion-row>
          <ion-row>
            <ion-col size="6" size-xs class="grid-input-col">
              <mat-form-field class="login-full-width grid-col-form" appearance="outline">
                <mat-label>Contact Person Email <span class="danger-text" *ngIf="isView=='true'">*</span></mat-label>
                <input matInput [(ngModel)]="contactPersonEmail" (change)="changeContactMail()"
                  placeholder="Enter Contact Person Email." name="eidContactPersonEmail" type="email"
                  pattern="[a-z0-9._%+-]+@[a-z0-9.-]+\.[a-z]{2,3}$" required #eidContactPersonEmail="ngModel"
                  [disabled]="isView=='true'" data-alert="Please enter Contact Person Email." id="eidContactPersonEmail">
                <mat-error *ngIf="!contactPersonEmail">
                  Contact Person Email is required
                </mat-error>
                 <mat-error *ngIf="contactPersonEmail && eidContactPersonEmail.errors?.pattern">
                Please enter a valid email address
              </mat-error>
            </mat-form-field> 
            </ion-col>
          <ion-col size="6" size-xs class="grid-input-col" *ngIf="changeContactEmail">
            <mat-form-field class="login-full-width grid-col-form" appearance="outline">
              <mat-label class="matLabel">Confirm Contact Person Email<span class="danger-text" *ngIf="isView=='true'">*</span> </mat-label>
              <input matInput [(ngModel)]="changeContactPersonEmail" placeholder="enter Confirm Contact Person Email" name="changeContactPersonEmail"
                 pattern="[a-z0-9._%+-]+@[a-z0-9.-]+\.[a-z]{2,3}$" required type="email"
                 [disabled]="isView=='true'" data-alert="Please enter Confirm Contact Person Email." id="changeContactPersonEmail">
              <!-- <mat-error *ngIf="changeContactPersonEmail && changeContactPersonEmail.errors?.pattern">
                Please enter a valid email address
              </mat-error> -->
              <mat-error *ngIf="!changeContactPersonEmail">
                Confirm Contact Person Email is required</mat-error>
              <mat-error *ngIf="(changeContactPersonEmail && (changeContactPersonEmail != labDirectorEmail))">
                Email doesn't match</mat-error>
            </mat-form-field>
          </ion-col>
          </ion-row>
           <ion-row>
            <ion-col size="6" size-xs class="grid-input-col">
              <mat-form-field class="login-full-width grid-col-form" appearance="outline">
                <mat-label>Contact Person Phone <span class="danger-text" *ngIf="isView=='true'">*</span></mat-label>
                <input matInput  type="number"maxlength="12" [(ngModel)]="participantData.contactPersonTelephone"
            placeholder="Enter Contact Person Phone." name="contactPersonTelephone" required
                  [disabled]="isView=='true'" data-alert="Please enter Contact Person Phone." id="contactPersonTelephone">
                <mat-error *ngIf="!participantData.contactPersonTelephone">
                  Contact Person Phone is required
                </mat-error>
              </mat-form-field>
            </ion-col>
          </ion-row>
        <!-- <ion-row *ngIf="participantData.affiliation">
          <ion-col size="5" class="grid-readonly-col">
            <p class="ion-text-wrap">
              <span class="text-title-color">Affiliation </span>
            </p>
          </ion-col>
          <ion-col size="1" class="grid-readonly-col">
            <p class="ion-text-wrap">
              <span class="text-title-color">:</span>
            </p>
          </ion-col>
          <ion-col class="grid-readonly-col">
            <p class="ion-text-wrap">
              <span>{{participantData.affiliation}}</span>
            </p>
          </ion-col>
        </ion-row>
        <ion-row *ngIf="participantData.phone">
          <ion-col size="5" class="grid-readonly-col">
            <p class="ion-text-wrap">
              <span class="text-title-color">Phone No </span>
            </p>
          </ion-col>
          <ion-col size="1" class="grid-readonly-col">
            <p class="ion-text-wrap">
              <span class="text-title-color">:</span>
            </p>
          </ion-col>
          <ion-col class="grid-readonly-col">
            <p class="ion-text-wrap">
              <span>{{participantData.phone}}</span>
            </p>
          </ion-col>
        </ion-row>
        <ion-row *ngIf="participantData.mobile">
          <ion-col size="5" class="grid-readonly-col">
            <p class="ion-text-wrap">
              <span class="text-title-color">Mobile No</span>
            </p>
          </ion-col>
          <ion-col size="1" class="grid-readonly-col">
            <p class="ion-text-wrap">
              <span class="text-title-color">:</span>
            </p>
          </ion-col>
          <ion-col class="grid-readonly-col">
            <p class="ion-text-wrap">
              <span> {{participantData.mobile}}</span>
            </p>
          </ion-col>
        </ion-row> -->
      </ion-grid>
    </form>
      <mat-action-row>
          <button mat-button color="warn" type="submit" (click)=" checkParticpentPanel('next')">Next</button>
        </mat-action-row>
    </mat-expansion-panel>

    <form #shipmentPanelForm="ngForm" novalidate>

      <mat-expansion-panel *ngIf="showShipmentData" [expanded]="step === 1" (opened)="setStep(1)">
        <mat-expansion-panel-header>
          <mat-panel-title>
            <ion-grid class="panelHeading">
              <ion-row>
                <ion-col size="10" class="grid-readonly-col">
                  <span class="text-title-color">Shipment Details</span>
                </ion-col>
                <ion-col size="2" class="grid-readonly-col" *ngIf="validShipmentDetails==true">
                  <ion-icon name="checkmark-circle" class="checkMarkIcon"></ion-icon>
                </ion-col>
              </ion-row>
            </ion-grid>
          </mat-panel-title>

        </mat-expansion-panel-header>

        <ion-grid>
          <ion-row *ngIf="shipmentData.shipmentDate">
            <ion-col size="5" class="grid-readonly-col">
              <p class="ion-text-wrap">
                <span class="text-title-color">Shipment Date </span>
              </p>
            </ion-col>
            <ion-col size="1" class="grid-readonly-col">
              <p class="ion-text-wrap">
                <span class="text-title-color">:</span>
              </p>
            </ion-col>
            <ion-col class="grid-readonly-col">
              <p class="ion-text-wrap">
                <span>{{shipmentData.shipmentDate}}</span>
              </p>
            </ion-col>
          </ion-row>
          <ion-row *ngIf="shipmentData.resultDueDate">
            <ion-col size="5" class="grid-readonly-col">
              <p class="ion-text-wrap">
                <span class="text-title-color">Result Due Date </span>
              </p>
            </ion-col>
            <ion-col size="1" class="grid-readonly-col">
              <p class="ion-text-wrap">
                <span class="text-title-color">:</span>
              </p>
            </ion-col>
            <ion-col class="grid-readonly-col">
              <p class="ion-text-wrap">
                <span>{{shipmentData.resultDueDate}}
                </span>
              </p>
            </ion-col>
          </ion-row>
          <ion-row *ngIf="shipmentCode">
            <ion-col size="5" class="grid-readonly-col">
              <p class="ion-text-wrap">
                <span class="text-title-color">Shipment Code </span>
              </p>
            </ion-col>
            <ion-col size="1" class="grid-readonly-col">
              <p class="ion-text-wrap">
                <span class="text-title-color">:</span>
              </p>
            </ion-col>
            <ion-col class="grid-readonly-col">
              <p class="ion-text-wrap">
                <span>{{shipmentCode}}
                </span>
              </p>
            </ion-col>
          </ion-row>
        </ion-grid>
        <ion-grid>
          <ion-row>
            <ion-col size="6" size-xs class="grid-input-col">
              <mat-form-field class="login-full-width grid-col-form" appearance="outline">
                <mat-label>Shipment Receipt Date 
                  <span class="danger-text" *ngIf="isView=='true'">*</span>
                 </mat-label>
                <input matInput [matDatepicker]="testReceiptPicker"  class="datepicker-input"
                  [(ngModel)]="shipmentData.testReceiptDate" [ngStyle]="{'color':isView === 'true'? 'rgba(0,0,0,.38)' : 'rgba(0,0,0,.87)'}" [readonly]="isView!='true'" [disabled]="isView=='true'" #eidTestRecieptDate="ngModel"
                  name="eidTestRecieptDate" placeholder="Choose Shipment Receipt Date" required data-alert="Please choose Shipment Receipt Date" id="testReceiptDate">
                <mat-datepicker-toggle matSuffix [for]="testReceiptPicker"></mat-datepicker-toggle>
                <ion-icon name="close"  *ngIf="isView=='false'" class="clearDateIcon" ios="ios-close" (click)="clearTestReceiptDate()"></ion-icon>
                <mat-datepicker #testReceiptPicker [disabled]="isView=='true'"></mat-datepicker>
                <mat-error *ngIf="!shipmentData.testReceiptDate">Shipment Receipt Date is required 
                </mat-error>
              </mat-form-field>
            </ion-col>
            <!-- <ion-col size="6" size-xs class="grid-input-col" *ngIf="!ptPanelNotTested">
              <mat-form-field class="login-full-width grid-col-form" appearance="outline">
                <mat-label>Sample Rehydration Date <span class="danger-text" *ngIf="isView=='true'">*</span></mat-label>
                <input matInput [matDatepicker]="sampleRhdPicker" #eidSampleRehydrationDate="ngModel"
                  name="eidSampleRehydrationDate" [ngStyle]="{'color':isView === 'true'? 'rgba(0,0,0,.38)' : 'rgba(0,0,0,.87)'}" [(ngModel)]="shipmentData.sampleRehydrationDate"
                  placeholder="Choose Sample Rehydration Date" [readonly]="isView!='true'" [disabled]="isView=='true'"  required data-alert="Please choose Sample Rehydration Date" id="sampleRehydrationDate">
                <mat-datepicker-toggle matSuffix [for]="sampleRhdPicker"></mat-datepicker-toggle>
                <ion-icon name="close"  *ngIf="isView=='false'" class="clearDateIcon" ios="ios-close" (click)="clearSampleRehydDate()"></ion-icon>
                <mat-datepicker #sampleRhdPicker [disabled]="isView=='true'"></mat-datepicker>
                <mat-error *ngIf="!shipmentData.sampleRehydrationDate">
                  Sample Rehydration Date is required 
                </mat-error>
              </mat-form-field>
            </ion-col> -->
            <ion-col size="6" size-xs class="grid-input-col">
              <mat-form-field class="login-full-width grid-col-form" appearance="outline">
                <mat-label>Shipment Testing Date</mat-label>
                <input matInput [matDatepicker]="testDatePicker" [(ngModel)]="shipmentData.shipmentTestingDate" [ngStyle]="{'color':isView === 'true'? 'rgba(0,0,0,.38)' : 'rgba(0,0,0,.87)'}"
                placeholder="Choose Shipment Testing Date" #eidTestingDate="ngModel" name="eidTestingDate"
                [readonly]="isView!='true'" [disabled]="isView=='true'"[min]="shipmentData.testReceiptDate" >
                <mat-datepicker-toggle matSuffix [for]="testDatePicker"></mat-datepicker-toggle>
                <ion-icon name="close"  *ngIf="isView=='false'" class="clearDateIcon" ios="ios-close" (click)="clearTestingDate()"></ion-icon>
                <mat-datepicker #testDatePicker [disabled]="isView=='true'"></mat-datepicker>
                <!-- <mat-error *ngIf="!shipmentData.shipmentTestingDate">
                  Shipment Testing Date is required 
                </mat-error> -->
              </mat-form-field>
            </ion-col>
            <ion-col size="6" size-xs class="grid-input-col">
              <mat-form-field class="login-full-width grid-col-form" appearance="outline">
                <mat-label>Extraction Assay </mat-label>
                <mat-select [(ngModel)]="shipmentData.extractionAssay" #extractionAssay="ngModel" name="extractionAssay"
                  [disabled]="isView=='true'">
                  <mat-option>--Select--</mat-option>
                  <mat-option *ngFor="let vl of shipmentData.extractionAssayDropdown" [value]="vl.value">
                    {{vl.show}}
                  </mat-option>
                </mat-select>
                <mat-error *ngIf="!shipmentData.extractionAssay">Please choose Extraction Assay </mat-error>
              </mat-form-field>
            </ion-col>
            <!-- <ion-col size="6" size-xs class="grid-input-col">
              <mat-form-field class="login-full-width grid-col-form" appearance="outline">
                <mat-label>Detection Assay </mat-label>
                <mat-select [(ngModel)]="shipmentData.detectionAssay" #detAssay="ngModel" name="detAssay"
                  [disabled]="isView=='true'" >
                  <mat-option>--Select--</mat-option>
                  <mat-option *ngFor="let vl of shipmentData.detectionAssayDropdown" [value]="vl.value">
                    {{vl.show}}
                  </mat-option>
                </mat-select>

                <mat-error *ngIf="!shipmentData.detectionAssay">Please choose Detection Assay </mat-error>
              </mat-form-field>

            </ion-col>  -->

          </ion-row>

          <!-- <ion-row>

            <ion-col size="6" size-xs class="grid-input-col">
              <mat-form-field class="login-full-width grid-col-form" appearance="outline">
                <mat-label>Extraction Assay Lot No. <span class="danger-text" *ngIf="isView=='true'">*</span></mat-label>
                <input matInput [(ngModel)]="shipmentData.extractionLotNumber"
                  placeholder="Enter Extraction Assay Lot No." #extLotNo="ngModel" name="extLotNo" required
                  [disabled]="isView=='true'" data-alert="Please enter Extraction Assay Lot No." id="extractionLotNumber">
                <mat-error *ngIf="!shipmentData.extractionLotNumber">
                  Extraction Assay Lot No is required
                </mat-error>
              </mat-form-field>
            </ion-col>
            <ion-col size="6" size-xs class="grid-input-col">
              <mat-form-field class="login-full-width grid-col-form"
                [ngClass]="{ 'mat-form-field-invalid': !shipmentData.detectionLotNumber || (!shipmentData.detectionLotNumber  && isSubmitted)}"
                appearance="outline">
                <mat-label>Detection Assay Lot No. <span class="danger-text" *ngIf="isView=='true'">*</span></mat-label>
                <input matInput [(ngModel)]="shipmentData.detectionLotNumber"
                  placeholder="Enter Detection Assay Lot No." #detLotNo="ngModel" name="detLotNo" required
                  [disabled]="isView=='true'" data-alert="Please enter Detection Assay Lot No." id="detectionLotNumber">
                <mat-error
                  *ngIf="!shipmentData.detectionLotNumber || (!shipmentData.detectionLotNumber  && isSubmitted)">
                  Detection Assay Lot No is required
                </mat-error>
              </mat-form-field>
            </ion-col>
          </ion-row> -->
          <!-- <ion-row>
            <ion-col size="6" size-xs class="grid-input-col">
              <mat-form-field class="login-full-width grid-col-form" appearance="outline">
                <mat-label>Extraction Assay Expiration Date</mat-label>
                <input matInput [matDatepicker]="extAssayExpiryDate" [(ngModel)]="shipmentData.extractionExpirationDate" [ngStyle]="{'color':isView === 'true'? 'rgba(0,0,0,.38)' : 'rgba(0,0,0,.87)'}"
                placeholder="Choose Extraction Assay Expiration Date"  #extExpDate="ngModel" name="extExpDate"
                [readonly]="isView!='true'" [disabled]="isView=='true'">
                <mat-datepicker-toggle matSuffix [for]="extAssayExpiryDate"></mat-datepicker-toggle>
                <ion-icon name="close"  *ngIf="isView=='false'" class="clearDateIcon" ios="ios-close" (click)="clearExtAssExpDate()"></ion-icon>
                <mat-datepicker #extAssayExpiryDate [disabled]="isView=='true'"></mat-datepicker>
                 <mat-error *ngIf="!shipmentData.extractionExpirationDate">
                  Extraction Assay Expiration Date is required 
                </mat-error> 
              </mat-form-field>
            </ion-col>
            <ion-col size="6" size-xs class="grid-input-col">
              <mat-form-field class="login-full-width grid-col-form" appearance="outline">
                <mat-label>Detection Assay Expiration Date <span class="danger-text" *ngIf="isView=='true'">*</span></mat-label>
                <input matInput [matDatepicker]="detAssayExpiryDate" #detExpDate="ngModel" name="detExpDate" [ngStyle]="{'color':isView === 'true'? 'rgba(0,0,0,.38)' : 'rgba(0,0,0,.87)'}"
                  [(ngModel)]="shipmentData.detectionExpirationDate" placeholder="Choose Detection Assay Expiration Date" required
                  [readonly]="isView!='true'" [disabled]="isView=='true'" data-alert="Please choose Detection Assay Expiration Date" id="detectionExpirationDate"  >
                <mat-datepicker-toggle matSuffix [for]="detAssayExpiryDate"></mat-datepicker-toggle>
                <ion-icon name="close"  *ngIf="isView=='false'" class="clearDateIcon" ios="ios-close" (click)="clearDecAssExpDate()"></ion-icon>
                <mat-datepicker #detAssayExpiryDate [disabled]="isView=='true'"></mat-datepicker>
                <mat-error *ngIf="!shipmentData.detectionExpirationDate">
                  Detection Assay Expiration Date is required 
                </mat-error>
              </mat-form-field>
            </ion-col>
          </ion-row> -->
          <ion-row>
            <ion-col size="6" size-xs class="grid-input-col" *ngIf="isPartiEditRespDate">
              <mat-form-field class="login-full-width grid-col-form" appearance="outline">
                <mat-label>Response Date <span class="danger-text" *ngIf="isView=='true'">*</span></mat-label>
                <input matInput [matDatepicker]="respDate" placeholder="Choose Response Date"  #eidrespDate="ngModel" [ngStyle]="{'color':isView === 'true'? 'rgba(0,0,0,.38)' : 'rgba(0,0,0,.87)'}"
                  name="eidrespDate" [(ngModel)]="shipmentData.responseDate" [min]="shipmentData.testReceiptDate"[required]="isPartiEditRespDate"
                  [readonly]="isView!='true'" [disabled]="isView=='true'" data-alert="Please choose Response Date" id="responseDate">
                <mat-datepicker-toggle matSuffix [for]="respDate"></mat-datepicker-toggle>
                <ion-icon name="close"  *ngIf="isView=='false'" class="clearDateIcon" ios="ios-close" (click)="clearResponseDate()"></ion-icon>
                <mat-datepicker #respDate [disabled]="isView=='true'"></mat-datepicker>
                <mat-error *ngIf="!shipmentData.responseDate && isPartiEditRespDate"> Response Date is required 
                </mat-error>
              </mat-form-field>
            </ion-col>
            <ion-col size="6" size-xs class="grid-input-col" *ngIf="isPartiEditModeRec">
              <mat-form-field class="login-full-width grid-col-form" appearance="outline">
                <mat-label>Mode of Receipt <span class="danger-text" *ngIf="isView=='true'">*</span></mat-label>
                <mat-select [(ngModel)]="shipmentData.modeOfReceipt" #receiptmode="ngModel" name="receiptmode"
                  [required]="isPartiEditModeRec" [disabled]="isView=='true'" data-alert="Please select Mode Of Receipt" id="modeOfReceipt">
                  <mat-option>--Select--</mat-option>
                  <mat-option *ngFor="let item of shipmentData.modeOfReceiptDropdown" [value]="item.value">
                    {{item.show}}
                  </mat-option>
                </mat-select>
                <mat-error *ngIf="!shipmentData.modeOfReceipt && isPartiEditModeRec">Please choose the Mode Of Receipt
                </mat-error>
              </mat-form-field>
            </ion-col>
          </ion-row>
          <ion-row *ngIf="isQCDoneShow && participantQcAccess">
            <ion-col size="12">
              <mat-label class="matLabel" style="margin-left: 10px;font-size: 13px;">QC Done <span class="danger-text">*</span></mat-label>
              <mat-radio-group aria-labelledby="example-radio-group-label" class="login-full-width grid-col-form"
                [(ngModel)]="qcDone" name="eidQcDone" #eidQcDone="ngModel" [required]="isQCDoneShow"  [disabled]="isView=='true'">
                <mat-radio-button class="example-radio-button" *ngFor="let qcData of qcRadioArray"
                  [value]="qcData.value">
                  {{qcData.show}}
                </mat-radio-button>
              </mat-radio-group>
              <mat-error *ngIf="!qcDone">QC Done is required</mat-error>
            </ion-col>
          </ion-row>

          <ion-row *ngIf="isQCDoneShow && qcDone=='yes' && participantQcAccess">
            <ion-col size="12">
              <mat-form-field class="login-full-width grid-col-form" appearance="outline">
                <mat-label>QC Date <span class="danger-text" *ngIf="isView=='true'">*</span></mat-label>
                <input matInput [matDatepicker]="qcDatePicker" [(ngModel)]="qcDate" placeholder="Choose QC Date" [ngStyle]="{'color':isView === 'true'? 'rgba(0,0,0,.38)' : 'rgba(0,0,0,.87)'}"
                  [required]="isQCDoneShow && qcDone=='yes'" name="eidQcDate" #eidQcDate="ngModel"
                  [readonly]="isView!='true'" [disabled]="isView=='true'" data-alert="Please choose QC Date" id="qcDate">
                <mat-datepicker-toggle matSuffix [for]="qcDatePicker"></mat-datepicker-toggle>
                <ion-icon name="close" *ngIf="isView=='false'" class="clearDateIcon" ios="ios-close" (click)="clearQCDate()"></ion-icon>
                <mat-datepicker #qcDatePicker [disabled]="isView=='true'"></mat-datepicker>
                <mat-error *ngIf="!qcDate">QC Date is required </mat-error>
              </mat-form-field>
            </ion-col>
            <ion-col size="12">
              <mat-form-field class="login-full-width grid-col-form" appearance="outline">
                <mat-label>QC Done By <span class="danger-text" *ngIf="isView=='true'">*</span></mat-label>
                <input matInput [(ngModel)]="qcDoneBy" name="eidqcDoneBy" #eidqcDoneBy="ngModel"
                  placeholder="Enter QC Done by" [required]="isQCDoneShow && qcDone=='yes'" [disabled]="isView=='true'" data-alert="Please enter QC Done By" id="qcDoneBy">
                <mat-error *ngIf="!qcDoneBy">Please enter QC done by</mat-error>
              </mat-form-field>
            </ion-col>
          </ion-row>
        </ion-grid>

        <mat-action-row>
          <button mat-button color="primary" (click)="prevStep()">Previous</button>
          <button mat-button color="warn" type="submit" (click)="checkShipmentPanel('next')">Next</button>
        </mat-action-row>
      </mat-expansion-panel>
    </form>
    <form #PTPanelTestForm="ngForm" novalidate>

      <mat-expansion-panel *ngIf="showPTPanelData" [expanded]="step === 2" (opened)="setStep(2)">
        <mat-expansion-panel-header>
          <mat-panel-title>
            <ion-grid class="panelHeading">
              <ion-row>
                <ion-col size="10" class="grid-readonly-col">
                  <span class="text-title-color"> PT Panel Test</span>
                </ion-col>
                <ion-col size="2" class="grid-readonly-col" *ngIf="isValidPTPanel">
                  <ion-icon name="checkmark-circle" class="checkMarkIcon"></ion-icon>
                </ion-col>
              </ion-row>
            </ion-grid>
          </mat-panel-title>
        </mat-expansion-panel-header>
        <ion-row>
          <ion-col class="grid-input-col">
            <section class="div-section">
              <mat-checkbox [(ngModel)]="ptPanelNotTested" name="eidPtPanelTest" #eidPtPanelTest="ngModel" [disabled]="isView=='true'"
               >PT panel not tested</mat-checkbox>
            </section>
          </ion-col>
        </ion-row>
        <section *ngIf="ptPanelNotTested==false || !ptPanelNotTested">


          <div *ngIf="ptPanelData.sampleTextData">

            <mat-card class="dynamic-card" *ngFor="let sampleName of ptPanelData.sampleTextData.label ;let i = index">
              <mat-card-title>
                {{sampleName}}
                <span class="danger-text" *ngIf="ptPanelData.sampleTextData.mandatory[i]==true">*</span>
              </mat-card-title>
              <mat-card-content>

                <ion-row>
                  <ion-col class="grid-input-col">
                    <p class="no-padding" style="margin-top: 0;" *ngIf="ptPanelData.resultsTextData[0]">
                      {{ptPanelData.resultsTextData[0]}}
                    </p>
                    <mat-form-field class="login-full-width " appearance="outline"
                      [ngClass]="{ 'mat-form-field-invalid':ptPanelData.sampleTextData.mandatory[i]==true && !ptPanelData.samples.yourResults[i],'mat-form-field-valid': ptPanelData.sampleTextData.mandatory[i]==false}"
                      *ngIf="ptPanelData.samplesList">
                      <mat-label>{{ptPanelData.resultsTextData[1]}}</mat-label>
                      <mat-select [(ngModel)]="ptPanelData.samples.yourResults[i]" name="yourResult[{{i}}]" #yourResult="ngModel"
                        [disabled]="isView=='true'" [required]="ptPanelData.sampleTextData.mandatory[i]==true">
                        <mat-option>--Select--</mat-option>
                        <mat-option *ngFor="let item of ptPanelData.samplesList[sampleName]['Your-Results']"
                          [value]="item.value">
                          {{item.show}}
                        </mat-option>
                      </mat-select>
                      <mat-error *ngIf="ptPanelData.sampleTextData.mandatory[i]==true && !ptPanelData.samples.yourResults[i]">Please
                        Enter {{ptPanelData.resultsTextData[1]}}</mat-error>

                    </mat-form-field>
                  </ion-col>
                </ion-row>

                <ion-row>
                  <ion-col class="grid-input-col">

                    <mat-form-field class="login-full-width grid-col-form" appearance="outline">
                      <mat-label>{{ptPanelData.resultsTextData[2]}}</mat-label>
                      <input matInput [(ngModel)]="ptPanelData.samples.hivCtOd[i]" [disabled]="isView=='true'"
                        placeholder="Enter HIV CT/OD" name="hivCTOD[{{i}}]" #hivCTOD="ngModel"
                        >
                        <!-- [required]="ptPanelData.sampleTextData.mandatory[i]==true" -->
                      <!-- <mat-error *ngIf="ptPanelData.sampleTextData.mandatory[i]==true && !ptPanelData.samples.hivCtOd[i]">Please Enter
                        {{ptPanelData.resultsTextData[2]}}</mat-error>
                      
                          [ngClass]="{ 'mat-form-field-invalid':ptPanelData.sampleTextData.mandatory[i]==true && !ptPanelData.samples.hivCtOd[i],'mat-form-field-valid': ptPanelData.sampleTextData.mandatory[i]==false}" -->

                    </mat-form-field>
                  </ion-col>

                </ion-row>
                <ion-row>
                  <ion-col class="grid-input-col">

                    <mat-form-field class="login-full-width grid-col-form"
                      [ngClass]="{ 'mat-form-field-invalid':ptPanelData.sampleTextData.mandatory[i]==true && !ptPanelData.samples.IcQsValues[i],'mat-form-field-valid': ptPanelData.sampleTextData.mandatory[i]==false}"
                      appearance="outline">
                      <mat-label>{{ptPanelData.resultsTextData[3]}}</mat-label>
                      <input matInput [(ngModel)]="ptPanelData.samples.IcQsValues[i]" [disabled]="isView=='true'"
                        placeholder="Enter IC/QS Values" name="icQsValues[{{i}}]" #icQsValues="ngModel"
                       >
                       <!-- [required]="ptPanelData.sampleTextData.mandatory[i]==true" -->
                      <!-- <mat-error *ngIf="ptPanelData.sampleTextData.mandatory[i]==true && !ptPanelData.samples.IcQsValues[i]">Please
                        Enter {{ptPanelData.resultsTextData[3]}}</mat-error> -->

                    </mat-form-field>
                  </ion-col>

                </ion-row>
              </mat-card-content>
            </mat-card>

          </div>
        </section>
        <section *ngIf="ptPanelNotTested">
          <ion-row>
            <ion-col size="12" class="grid-input-col">
              <mat-form-field class="login-full-width grid-col-form" appearance="outline">
                <mat-label>
                  {{ptPanelData.vlNotTestedReasonText}} <span class="danger-text" *ngIf="isView=='true'">*</span>
                </mat-label>
                <mat-select [(ngModel)]="ptPanelData.vlNotTestedReason" name="vlNotTested" #vlNotTested="ngModel"
                  [required]="ptPanelNotTested" [disabled]="isView=='true'">
                  <mat-option>--Select--</mat-option>
                  <mat-option *ngFor="let item of ptPanelData.vlNotTestedReasonDropdown" [value]="item.value">
                    {{item.show}}
                  </mat-option>
                </mat-select>
                <mat-error *ngIf="ptPanelNotTested && !ptPanelData.vlNotTestedReason">Please choose the Reason for not testing
                </mat-error>
              </mat-form-field>
            </ion-col>
            <ion-col size="12" class="grid-input-col">
              <mat-form-field class="login-full-width grid-col-form" appearance="outline">
                <mat-label>
                  {{ptPanelData.ptNotTestedCommentsText}} <span class="danger-text" *ngIf="isView=='true'">*</span>
                </mat-label>
                <textarea matInput placeholder="Enter Your Comments here" name="eidPtNotTestedComments"
                  #eidPtNotTestedComments="ngModel" [(ngModel)]="ptPanelData.ptNotTestedComments"
                  [disabled]="isView=='true'" [required]="ptPanelNotTested"></textarea>
                <mat-error *ngIf="ptPanelNotTested && !ptPanelData.ptNotTestedComments">Please Enter Your Comments
                </mat-error>
              </mat-form-field>
            </ion-col>
            <ion-col size="12" class="grid-input-col">
              <mat-form-field class="login-full-width grid-col-form" appearance="outline">
                <mat-label>
                  {{ptPanelData.ptSupportCommentsText}}
                </mat-label>
                <textarea matInput placeholder="Enter Your Support Comments here" name="eidPtNotSupportComments"
                  #eidPtNotSupportComments="ngModel" [disabled]="isView=='true'"
                  [(ngModel)]="ptPanelData.ptSupportComments"></textarea>
                  <!-- [required]="ptPanelNotTested" -->
                <!-- <mat-error *ngIf="ptPanelNotTested && !ptPanelData.ptSupportComments">Please Enter Your Comments
                </mat-error> -->
              </mat-form-field>
            </ion-col>
          </ion-row>
        </section>
        <mat-action-row>
          <button mat-button color="warn" (click)="prevStep()">Previous</button>
          <button mat-button color="primary" type='submit' (click)="checkPtPanel('next')">Next</button>
        </mat-action-row>
      </mat-expansion-panel>
    </form>

    <form #customFieldsForm="ngForm" novalidate>

      <mat-expansion-panel *ngIf="showCustomFieldData" [expanded]="step === 3" (opened)="setStep(3)">
        <mat-expansion-panel-header>
          <mat-panel-title>
            <ion-grid class="panelHeading">
              <ion-row>
                <ion-col size="10" class="grid-readonly-col">
                  <span class="text-title-color">Custom Fields</span>
                </ion-col>
                <ion-col size="2" class="grid-readonly-col" *ngIf="isValidCustField==true">
                  <ion-icon name="checkmark-circle" class="checkMarkIcon"></ion-icon>
                </ion-col>
              </ion-row>
            </ion-grid>
          </mat-panel-title>
        </mat-expansion-panel-header>
        <ion-grid>
          <ion-row *ngIf="customFieldData.customField1Text">
            <ion-col size="12" class="grid-input-col">
              <mat-form-field class="login-full-width grid-col-form" appearance="outline">
                <mat-label>{{customFieldData.customField1Text}}</mat-label>
                <input matInput [(ngModel)]="customFieldData.customField1Val"
                  placeholder="Enter {{customFieldData.customField1Text}}" #custField1="ngModel" name="custField1"
                  [disabled]="isView=='true'">
                <mat-error *ngIf="!customFieldData.customField1Val">
                  {{customFieldData.customField1Text}} is required
                </mat-error>
              </mat-form-field>
            </ion-col>
          </ion-row>
          <ion-row *ngIf="customFieldData.customField2Text">
            <ion-col size="12" class="grid-input-col">
              <mat-form-field class="login-full-width grid-col-form" appearance="outline">
                <mat-label>{{customFieldData.customField2Text}}</mat-label>
                <input matInput [(ngModel)]="customFieldData.customField2Val"
                  placeholder="Enter {{customFieldData.customField2Text}}" #custField2="ngModel" name="custField2"
                  [disabled]="isView=='true'">
                <mat-error *ngIf="!customFieldData.customField2Val">
                  {{customFieldData.customField2Text}} is required
                </mat-error>
              </mat-form-field>
            </ion-col>
          </ion-row>
          <!-- <ion-row *ngIf="customFieldData.customField3Text">
        <ion-col size="12"class="grid-input-col">
          <mat-form-field class="login-full-width grid-col-form" appearance="outline">
            <mat-label>{{customFieldData.customField3Text}}</mat-label>
            <input matInput [(ngModel)]="customFieldData.customField3Val" 
            placeholder="Enter {{customFieldData.customField3Text}}" #custField3="ngModel"
             name="custField3"   [required]="customFieldData.customField3Text" [disabled]="isView=='true'">
            <mat-error *ngIf="!customFieldData.customField3Val">
              {{customFieldData.customField3Text}} is required
            </mat-error>
          </mat-form-field>
        </ion-col>
      </ion-row> -->
        </ion-grid>
        <mat-action-row>
          <button mat-button color="primary" (click)="prevStep()">Previous</button>
          <button mat-button color="warn" type='submit' (click)="checkCustFieldPanel('next')">Next</button>
        </mat-action-row>
      </mat-expansion-panel>
    </form>
    <form #otherInfoPanelForm="ngForm" novalidate>

      <mat-expansion-panel *ngIf="showOtherInfoData" [expanded]="step === 3+dynamicStep"
        (opened)="setStep(3+dynamicStep)">
        <mat-expansion-panel-header>
          <mat-panel-title>
            <ion-grid class="panelHeading">
              <ion-row>
                <ion-col size="10" class="grid-readonly-col">
                  <span class="text-title-color">Other Information</span>
                </ion-col>
                <ion-col size="2" class="grid-readonly-col" *ngIf="otherInfoValid==true">
                  <ion-icon name="checkmark-circle" class="checkMarkIcon"></ion-icon>
                </ion-col>
              </ion-row>
            </ion-grid>
          </mat-panel-title>
        </mat-expansion-panel-header>

        <ion-grid>
          <ion-row>
            <ion-col class="grid-input-col">
              <mat-form-field class="login-full-width grid-col-form" appearance="outline">
                <mat-label>Supervisor Review <span class="danger-text" *ngIf="isView=='true'">*</span> </mat-label>
                <mat-select [(ngModel)]="otherInfoData.supervisorReview" name="eidFormSupReview"
                  #eidFormSupReview="ngModel" required [disabled]="isView=='true'">
                  <mat-option *ngFor="let sr of otherInfoData.supervisorReviewDropdown" [value]="sr.value">
                    {{sr.show}}
                  </mat-option>
                </mat-select>
                <mat-error *ngIf="!otherInfoData.supervisorReview">Supervisor Review is
                  required</mat-error>
              </mat-form-field>
            </ion-col>
            <ion-col *ngIf="otherInfoData.supervisorReview=='yes'" class="grid-input-col">
              <mat-form-field class="login-full-width grid-col-form" appearance="outline">
                <mat-label>{{otherInfoData.supervisorLabel}} <span class="danger-text" *ngIf="isView=='true'">*</span> </mat-label>
                <input matInput [(ngModel)]="otherInfoData.supervisorName" name="eidFormSupName"
                  #eidFormSupName="ngModel" placeholder="Enter Supervisor Name"
                  [required]="otherInfoData.supervisorReview=='yes'" [disabled]="isView=='true'">
                <mat-error *ngIf="otherInfoData.supervisorReview=='yes' && !otherInfoData.supervisorName">Supervisor
                  Name is
                  required</mat-error>
              </mat-form-field>
            </ion-col>
          </ion-row>
          <ion-row>
            <ion-col class="grid-input-col">
              <mat-form-field class="login-full-width grid-col-form" appearance="outline">
                <mat-label>Comments</mat-label>
                <textarea matInput placeholder="Enter Comments here" name="eidComments" #eidComments="ngModel"
                  [(ngModel)]="otherInfoData.comments" [disabled]="isView=='true'"></textarea>
              </mat-form-field>
            </ion-col>
          </ion-row>

        </ion-grid>

        <mat-action-row>
          <button mat-button color="primary" (click)="prevStep()">Previous</button>
          <button mat-button color="warn" *ngIf="summarizeForm==false && isView!='true'" type='submit'
            (click)="submitEID(shipmentPanelForm,PTPanelTestForm,otherInfoPanelForm)">Submit</button>
        </mat-action-row>
      </mat-expansion-panel>
    </form>


  </mat-accordion>

  <ion-grid *ngIf="summarizeForm==true">
    <ion-row>
      <ion-col size="6">
        <ion-button class="text-center native-btn summarizeButtons"
        (click)="editForm()">Edit 
      </ion-button>
      </ion-col>
      <ion-col size="6">
        <ion-button class="text-center native-btn summarizeButtons confirm"
        (click)="confirmEID(shipmentPanelForm,PTPanelTestForm,otherInfoPanelForm)">Confirm 
      </ion-button>
      </ion-col>
    </ion-row>
  </ion-grid>
</ion-content>